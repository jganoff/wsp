# Releasing

## Quick Start

```bash
# Patch release (0.1.0 → 0.1.1)
cargo release patch --execute

# Minor release (0.1.0 → 0.2.0)
cargo release minor --execute

# Major release (0.1.0 → 1.0.0)
cargo release major --execute
```

Dry run (default, no `--execute`):
```bash
cargo release minor
```

## What Happens

1. `cargo-release` bumps the version in `Cargo.toml`
2. Pre-release hook runs `git cliff -o CHANGELOG.md --tag v<version>`
3. Commits: `chore(release): v<version>`
4. Creates git tag `v<version>`
5. Pushes branch and tag to origin
6. Tag push triggers `.github/workflows/release.yml`
7. `cargo-dist` builds cross-platform binaries and creates a GitHub Release

## Tools

| Tool | Purpose |
|---|---|
| [cargo-release](https://github.com/crate-ci/cargo-release) | Version bumping, tagging, pushing |
| [git-cliff](https://github.com/orhun/git-cliff) | Changelog generation from conventional commits |
| [cargo-dist](https://opensource.axo.dev/cargo-dist/) | Cross-platform binary builds + GitHub Releases |

## Install Prerequisites

```bash
cargo install cargo-dist cargo-release git-cliff
```

## Configuration Files

- `release.toml` — cargo-release config (tag format, pre-release hooks, publish settings)
- `cliff.toml` — git-cliff config (commit grouping, tag pattern, changelog template)
- `.github/workflows/release.yml` — GitHub Actions workflow generated by cargo-dist

## Changelog

The changelog is auto-generated from conventional commits. The `chore(release)` and `chore(deps)` commits are excluded. To preview unreleased changes:

```bash
git cliff --unreleased
```

## Targets

Binaries are built for:
- macOS (x86_64 + aarch64)
- Linux (x86_64)
- Windows (x86_64)
